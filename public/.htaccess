# ----------------------------------------------------------------------
# Better website experience for IE users
# ----------------------------------------------------------------------

# Force the latest IE version, in various cases when it may fall back to IE7 mode
#  github.com/rails/rails/commit/123eb25#commitcomment-118920
# Use ChromeFrame if it's installed for a better experience for the poor IE folk
<IfModule mod_headers.c>
  Header set X-UA-Compatible "IE=edge,chrome=1"
  # mod_headers can't match by content-type, but we don't want to send this header on *everything*...
  <FilesMatch "\.(appcache|crx|css|eot|gif|htc|ico|jpe?g|js|m4a|m4v|manifest|mp4|oex|oga|ogg|ogv|otf|pdf|png|safariextz|svg|svgz|ttf|vcf|webm|webp|woff|xml|xpi)$">
    Header unset X-UA-Compatible
  </FilesMatch>
</IfModule>

# ----------------------------------------------------------------------
# Webfont access
# ----------------------------------------------------------------------

# Allow access from all domains for webfonts.
# Alternatively you could only whitelist your
# subdomains like "subdomain.example.com".

<IfModule mod_headers.c>
  <FilesMatch "\.(eot|font.css|otf|ttc|ttf|woff)$">
    Header set Access-Control-Allow-Origin "*"
  </FilesMatch>
</IfModule>

# ----------------------------------------------------------------------
# Proper MIME type for all files
# ----------------------------------------------------------------------

<IfModule mod_mime.c>

  # JavaScript
  #   Normalize to standard type (it's sniffed in IE anyways)
  #   tools.ietf.org/html/rfc4329#section-7.2
  AddType application/javascript                js jsonp
  AddType application/json                      json

  # Audio
  AddType audio/mp4                             m4a f4a f4b
  AddType audio/ogg                             oga ogg

  # Video
  AddType video/mp4                             mp4 m4v f4v f4p
  AddType video/ogg                             ogv
  AddType video/webm                            webm
  AddType video/x-flv                           flv

  # SVG
  #   Required for svg webfonts on iPad
  #   twitter.com/FontSquirrel/status/14855840545
  AddType     image/svg+xml                     svg svgz
  AddEncoding gzip                              svgz

  # Webfonts
  AddType application/font-woff                 woff
  AddType application/vnd.ms-fontobject         eot
  AddType application/x-font-ttf                ttf ttc
  AddType font/opentype                         otf

  # Assorted types
  AddType application/octet-stream              safariextz
  AddType application/x-chrome-extension        crx
  AddType application/x-opera-extension         oex
  AddType application/x-shockwave-flash         swf
  AddType application/x-web-app-manifest+json   webapp
  AddType application/x-xpinstall               xpi
  AddType application/xml                       rss atom xml rdf
  AddType image/webp                            webp
  AddType image/x-icon                          ico
  AddType text/cache-manifest                   appcache manifest
  AddType text/vtt                              vtt
  AddType text/x-component                      htc
  AddType text/x-vcard                          vcf

</IfModule>

# ----------------------------------------------------------------------
# Gzip compression
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # Compress all output labeled with one of the following MIME-types
  # (for Apache versions below 2.3.7, you don't need to enable `mod_filter`
  # and can remove the `<IfModule mod_filter.c>` and `</IfModule>` lines as
  # `AddOutputFilterByType` is still in the core directives)
  <IfModule mod_filter.c>
    AddOutputFilterByType DEFLATE application/atom+xml \
                                  application/javascript \
                                  application/json \
                                  application/rss+xml \
                                  application/vnd.ms-fontobject \
                                  application/x-font-ttf \
                                  application/xhtml+xml \
                                  application/xml \
                                  font/opentype \
                                  image/svg+xml \
                                  image/x-icon \
                                  text/css \
                                  text/html \
                                  text/plain \
                                  text/x-component \
                                  text/xml
  </IfModule>

</IfModule>

# Rewrite engine on
<IfModule mod_rewrite.c>
  Options +FollowSymlinks
# Options +SymLinksIfOwnerMatch
  RewriteEngine On
# RewriteBase /
</IfModule>

# Rewrite www.example.com to example.com
<IfModule mod_rewrite.c>
  RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]
</IfModule>

# no index.php in url required
<IfModule mod_rewrite.c>
    Options -MultiViews
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule>

# ----------------------------------------------------------------------
# UTF-8 encoding
# ----------------------------------------------------------------------

# Use UTF-8 encoding for anything served text/plain or text/html
AddDefaultCharset utf-8

# Force UTF-8 for a number of file formats
<IfModule mod_mime.c>
    AddCharset utf-8 .atom .css .js .json .rss .vtt .xml
</IfModule>

Redirect 301 /post/44396437701	http://fideloper.com/laravel4-etag-conditional-get
Redirect 301 /post/37032085106	http://fideloper.com/production-ubuntu-install-sphinx-search
Redirect 301 /post/39752822439	http://fideloper.com/web-vs-native-decision
Redirect 301 /post/38147802759	http://fideloper.com/ubuntu-install-php54-lamp
Redirect 301 /post/35343710409	http://fideloper.com/apache-fallbackresource
Redirect 301 /post/34901897298	http://fideloper.com/skypipe
Redirect 301 /post/35079537172	http://fideloper.com/laravel-4-first-screencast
Redirect 301 /post/34854270227	http://fideloper.com/chrome-canary
Redirect 301 /page/4	        http://fideloper.com/ubuntu-prod-vhost
Redirect 301 /page/5	        http://fideloper.com/some-common-git-tips
Redirect 301 /post/34854270227	http://fideloper.com/apache-fallbackresource
Redirect 301 /post/39495332524	http://fideloper.com/ubuntu-mobile-os
Redirect 301 /post/39479813212	http://fideloper.com/google-enterprise
Redirect 301 /post/38868495225	http://fideloper.com/what-is-scale
Redirect 301 /page/6	        http://fideloper.com/yahoo-finance-data-from-yql-is-great-no-really
Redirect 301 /post/40519079507	http://fideloper.com/laravel-facade-root
Redirect 301 /page/3            http://fideloper.com/apache-fallbackresource
